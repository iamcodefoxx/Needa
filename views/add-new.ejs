<%- include("partials/header.ejs") %>
<%- include("partials/backend-toast.ejs") %>

<!-- CONNECT FLASH MESSAGE -->

<% if(flashSuccess !="" ) { %>
    <style>
      .toast {
        border-left: 8px solid #47d764;
      }

      .fa-check-circle {
        color: #47d764;
      }
    </style>
    <section>
      <div class="toast-wrapper">
        <div class="toast">
          <div class="icon-container">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="message-container flex-5">
            <p>Success</p>
            <p>
              <%= flashSuccess %>
            </p>
          </div>
          <button id="closeToast">&times;</button>
        </div>
      </div>
    </section>
  <% } %>

  <!-- CONNECT FLASH MESSAGE -->
  
  <% if(flashError !="" ) { %>
    <style>
      .toast {
        border-left: 8px solid #ff2121;
      }
    
      .fa-times-circle {
        color: #ff2121;
      }
    </style>
    <section>
      <div class="toast-wrapper">
        <div class="toast">
          <div class="icon-container">
            <i class="fas fa-times-circle"></i>
          </div>
          <div class="message-container flex-column-gap-5">
            <p>Error</p>
            <p>
              <%= flashError %>
            </p>
          </div>
          <button id="closeToast">&times;</button>
        </div>
      </div>
    </section>
  <% } %>


  <div class="app">

    <aside class="sidebar">
      <h2>MAIN</h2>
      <nav class="menu">
        <a href="/dashboard" class="menu-item">Dashboard</a>
        <a href="/settings" class="menu-item">Edit profile</a>
        <a href="/settings/showcase" class="menu-item">Upload images</a>
        <a href="/settings/account" class="menu-item">Delete account</a>
        <a href="/feed" class="menu-item">Live feed</a>
        <a href="/my-posts" class="menu-item">My Posts</a>
        <a href="/add-new" class="menu-item is-active">Add New</a>
      </nav>
    </aside>

    <main class="content">

      <div class="hamburger-container">
        <div class="menu-toggle">
          <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </div>
        </div>
      </div>

      <div id="add-new-section">
        <div class="feed-column">
          <div class="post flex-column-gap-20">
            <h2>Add new post</h2>
            <form action="/auth/add-new" method="POST">
              <input type="text" name="title" placeholder="Title" maxlength="100" required>
              <textarea name="post" id="post" placeholder="Tell users what you need help with..." maxlength="1000" required></textarea>
              <div class="post-footer">
                <button id="post-btn" type="submit">Post</button>
              </div>
            </form>
          </div>
        </div>
      </div>

    </main>
  </div>

  <script src="/js/script.js"></script>
  <script src="/js/toast.js"></script>
  <script src="/js/header-form-authentication.js"></script>

  <script>
    const userCity = "<%= user.city %>";
    const userState = "<%= user.state %>";
    document.querySelector("#header-location").value = `${userCity}, ${userState}`;
  </script>

</body>

</html>