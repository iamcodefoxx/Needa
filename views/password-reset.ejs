<%- include("partials/header.ejs") %>

  <% if(typeof type !=="undefined" && type === "success") { %>
    <style>
      .toast {
        transform: translateX(0);
        border-left: 8px solid #47d764;
      }
      .fa-check-circle {
        color: #47d764;
      }
    </style>
    <section>
      <div class="toast-wrapper">
        <div class="toast">
          <div class="icon-container">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="message-container flex-5">
            <p>Success</p>
            <p>
              <%= message %>
            </p>
          </div>
          <button id="closeToast">&times;</button>
        </div>
      </div>
    </section>
  <% } %>
  
  <% if(typeof type !=="undefined" && type === "error") { %>
    <style>
      .toast {
        transform: translateX(0);
        border-left: 8px solid #ff2121;
      }

      .fa-times-circle {
        color: #ff2121;
      }
    </style>
    <section>
      <div class="toast-wrapper">
        <div class="toast">
          <div class="icon-container">
            <i class="fas fa-times-circle"></i>
          </div>
          <div class="message-container flex-5">
            <p>Error</p>
            <p>
              <%= message %>
            </p>
          </div>
          <button id="closeToast">&times;</button>
        </div>
      </div>
    </section>
  <% } %>

  <section id="passwordResetSection">
    <div class="container">
      <div class="subcontainer">
        <div id="title">
          <h1 style="font-size: 2.5rem;"><a href="/">Needa</a></h1>
        </div>
        <form action="/auth/password-reset" method="POST" id="passwordResetForm">
          <p>Enter the email you signed up with and we will send you a link to reset your password</p>
          <div>
            <input type="email" name="email" id="email" placeholder="Email" required>
          </div>
          <div>
            <button id="link-btn" class="g-recaptcha" data-sitekey="6LfNj-keAAAAACbPznMW6DDIxOGjMpOB6IgCAU39"
              data-callback="passwordResetRequest">Send</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <script src="/js/script.js"></script>
  <script>

    const toast = document.querySelector(".toast"),
    closeToast = document.querySelector("#closeToast");

    if(toast){
      closeToast.addEventListener("click", () => {
        toast.style.transform = "translateX(400px)";
      })
    }

   passwordResetRequest = (token) => {
     document.querySelector("#passwordResetForm").submit();
   }

  </script>

  <%- include("partials/footer.ejs") %>